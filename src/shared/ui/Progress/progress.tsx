import { IProgressProps } from "./progress.props";
import styles from "./progress.module.scss";
import { IntRange } from "@shared/types";

export default function Progress({
	value,
	max = 100,
	label = "",
}: IProgressProps) {
	if (max <= 0) max = 100;
	const perValue = Math.round((value / max) * 100) as IntRange<0, 100>;

	return (
		<div
			className={[styles.default, styles[`progress-${perValue}`]].join(
				" ",
			)}
			aria-label={label}
			role="progressbar"
			aria-valuemin={0}
			aria-valuemax={100}
			aria-valuenow={perValue}
		>
			<svg
				aria-hidden="true"
				className={styles.spinner}
				width="36"
				height="36"
				viewBox="0 0 36 36"
				fill="none"
				xmlns="http://www.w3.org/2000/svg"
			>
				<path
					d="M2.48737 33.5137C4.89737 35.9237 7.59037 37.1407 10.1754 34.5557C12.0104 32.7207 11.5434 29.2787 9.13237 26.8667C6.72137 24.4567 3.28037 23.9897 1.44437 25.8247C-1.14063 28.4097 0.0763712 31.1017 2.48737 33.5137ZM9.04037 26.9597C10.8484 28.7677 11.1984 31.3497 9.82237 32.7267C7.88437 34.6647 5.86437 33.7517 4.05537 31.9437C2.24637 30.1367 1.33437 28.1177 3.27337 26.1777C4.64937 24.8017 7.23137 25.1517 9.04037 26.9597ZM33.5124 2.48671C31.1024 0.0757132 28.4104 -1.14029 25.8244 1.44471C23.9894 3.27971 24.4564 6.72171 26.8674 9.13271C29.2784 11.5437 32.7184 12.0107 34.5554 10.1747C37.1404 7.58971 35.9234 4.89671 33.5124 2.48671ZM26.9594 9.03971C25.1514 7.23171 24.8014 4.65071 26.1774 3.27371C28.1154 1.33571 30.1354 2.24771 31.9444 4.05571C33.7534 5.86371 34.6654 7.88271 32.7264 9.82171C31.3504 11.1977 28.7684 10.8477 26.9594 9.03971Z"
					fill="#292F33"
				/>
				<path
					d="M17.9994 34.9997C27.3882 34.9997 34.9994 27.3886 34.9994 17.9997C34.9994 8.61087 27.3882 0.999713 17.9994 0.999713C8.61053 0.999713 0.999371 8.61087 0.999371 17.9997C0.999371 27.3886 8.61053 34.9997 17.9994 34.9997Z"
					fill="#292F33"
				/>
				<path
					d="M31.5994 17.9997C31.5994 25.5107 25.5104 31.5997 17.9994 31.5997C10.4884 31.5997 4.39937 25.5107 4.39937 17.9997C4.39937 10.4887 10.4884 4.39971 17.9994 4.39971C25.5104 4.39971 31.5994 10.4887 31.5994 17.9997Z"
					fill="#FFAC33"
				/>
				<path
					d="M19.4444 10.6647L16.9054 8.12571C17.0955 7.90467 17.192 7.61825 17.1744 7.32723C17.1569 7.0362 17.0266 6.76347 16.8113 6.56689C16.596 6.37031 16.3126 6.26535 16.0211 6.27428C15.7297 6.28321 15.4532 6.40532 15.2504 6.61471C14.9804 6.88471 14.8784 7.25771 14.9394 7.60571C14.7038 7.56383 14.461 7.59819 14.2464 7.70382C14.0317 7.80944 13.8563 7.98081 13.7458 8.19298C13.6352 8.40516 13.5953 8.64708 13.6317 8.88354C13.6681 9.12 13.7791 9.33866 13.9484 9.50771C14.3634 9.92271 15.0184 9.94071 15.4594 9.57171L17.9984 12.1097L19.4444 10.6647Z"
					fill="#FFE8B6"
				/>
				<path
					d="M27.6684 20.3357C28.3914 19.6127 30.2194 16.5097 27.6894 13.9797C25.9264 12.2167 24.5054 12.3177 21.8624 11.6627C20.7784 11.3007 19.3644 9.99771 19.0034 9.63671C18.6414 9.99771 18.7684 11.3197 18.7684 11.3197C18.7684 11.3197 17.1934 11.4477 16.8314 11.8087C17.1924 12.1697 18.8724 13.7587 19.1664 14.5037C19.9564 17.0117 19.8664 18.2877 21.6304 20.0497C24.5214 22.9407 26.9464 21.0587 27.6684 20.3357Z"
					fill="#C1694F"
				/>
				<path
					d="M9.33237 16.4997C9.33237 18.4327 12.4314 19.9997 10.4994 19.9997C10.0397 19.9997 9.58462 19.9092 9.15998 19.7333C8.73534 19.5574 8.3495 19.2996 8.0245 18.9746C7.69949 18.6496 7.44168 18.2637 7.26579 17.8391C7.0899 17.4145 6.99937 16.9593 6.99937 16.4997C6.99937 16.0401 7.0899 15.585 7.26579 15.1603C7.44168 14.7357 7.69949 14.3498 8.0245 14.0248C8.3495 13.6998 8.73534 13.442 9.15998 13.2661C9.58462 13.0902 10.0397 12.9997 10.4994 12.9997C12.4324 12.9997 9.33237 14.5667 9.33237 16.4997ZM18.0174 25.9897C19.6164 26.7607 22.1534 24.8227 21.3814 26.4227C21.0103 27.191 20.3493 27.7805 19.5436 28.0614C18.738 28.3424 17.8537 28.2918 17.0854 27.9207C16.317 27.5497 15.7276 26.8886 15.4466 26.083C15.1657 25.2773 15.2163 24.393 15.5874 23.6247C16.3594 22.0247 16.4184 25.2177 18.0174 25.9897Z"
					fill="#77B255"
				/>
				<path
					d="M14.9994 18.9997C16.1039 18.9997 16.9994 18.1043 16.9994 16.9997C16.9994 15.8951 16.1039 14.9997 14.9994 14.9997C13.8948 14.9997 12.9994 15.8951 12.9994 16.9997C12.9994 18.1043 13.8948 18.9997 14.9994 18.9997Z"
					fill="#F4900C"
				/>
				<path
					d="M23.9994 24.9997C24.5517 24.9997 24.9994 24.552 24.9994 23.9997C24.9994 23.4474 24.5517 22.9997 23.9994 22.9997C23.4471 22.9997 22.9994 23.4474 22.9994 23.9997C22.9994 24.552 23.4471 24.9997 23.9994 24.9997Z"
					fill="#F4900C"
				/>
				<path
					d="M10.9994 23.9997C11.5517 23.9997 11.9994 23.552 11.9994 22.9997C11.9994 22.4474 11.5517 21.9997 10.9994 21.9997C10.4471 21.9997 9.99937 22.4474 9.99937 22.9997C9.99937 23.552 10.4471 23.9997 10.9994 23.9997Z"
					fill="#F4900C"
				/>
			</svg>
		</div>
	);
}
